<div class="row">
    <% @user_items.each do |item| %>
        <div class="row">
            <div class="col-md-4">
                <%= attachment_image_tag item, :jacket_image %>
            </div>

            <div class="col-md-4">
                #item.cart_items.find_by(user_id: current_user.id)でitemとcurrent_userに紐づく
                #cart_itemsテーブルのレコードを持ってくる
                <div>
                    <p><%= item.item_name %></p>
                    <p><%= item.artist_name %></p>
                    <p><%= item.sales_management %></p>
                </div>
                <div>
                    <%= form_for(item.cart_items.find_by(user_id: current_user.id), 
                                        url: cart_path(item.id)) do |f| %>
                        <%= f.select :quantity, options_for_select((1..item.quantity).to_a,
                                        item.cart_items.find_by(user_id: current_user.id).quantity) %>
                        <%= f.submit '変更', class:"btn btn-primary" %>
                    <% end %>
                </div>
            </div>
            
            <div class="col-md-4">
                <div>
                        <h3><%= item.price * item.cart_items.find_by(user_id: current_user.id).quantity %></h3>
                </div>
                <div>
                    #関連するcart_itemsテーブルを特定できる値ををcarts#destroyにわたす。
                    <%= link_to 'カートから削除', cart_path(item.id), method: :delete %>  
                </div>
            </div>
        </div>
    <% end %>
</div>